(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7578a430"],{"2c38":function(t,a,e){},"652d":function(t,a,e){"use strict";var s=e("2c38"),r=e.n(s);r.a},"7cb4":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[e("Circle4")],1),e("Header"),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 offset-md-3"},[e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("div",{attrs:{id:"accordion"}},[e("div",{staticClass:"card"},[e("button",{staticClass:"card-header btn btn-link d-flex justify-content-between",attrs:{id:"headingOne","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[e("h5",{staticClass:"mb-0"},[t._v("購物車清單")]),e("div",{staticClass:"totalPrice"},[t._v(t._s(t._f("currency")(t.totalPrice)))])]),e("div",{staticClass:"collapse",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordion"}},[e("div",{staticClass:"card-body p-0"},[e("table",{staticClass:"table mb-0"},[t._m(1),e("tbody",[t._l(t.carts,(function(a){return e("tr",{key:a.id},[e("td",[e("img",{staticClass:"img img-fluid cartImg",attrs:{src:""+a.product.imageUrl,alt:""+a.product.title}})]),e("td",{staticClass:"text-left"},[t._v(t._s(a.product.title))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),t._m(2),e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("合計：")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalPrice)))])])],2)])])])])])])]),e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"userName"}},[t._v("收件人姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"userName",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"userTel"}},[t._v("收件人電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",name:"tel",id:"userTel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("電話必須輸入")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"userAdd"}},[t._v("收件人地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"userAdd",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"comment"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"comment",rows:"10"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("送出訂單")])])])])])])]),e("Footer")],1)},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-10 offset-md-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 mb-2 mb-md-4"},[e("div",{staticClass:"step active"},[t._v("資料填寫")])]),e("div",{staticClass:"col-md-4 mb-2 mb-md-4"},[e("div",{staticClass:"step"},[t._v("確認訂單")])]),e("div",{staticClass:"col-md-4 mb-2 mb-md-4"},[e("div",{staticClass:"step"},[t._v("完成")])])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"20%"}}),e("th",{staticClass:"text-left"},[t._v("產品名稱")]),e("th",{staticClass:"text-center"},[t._v("單位")]),e("th",{staticClass:"text-right"},[t._v("價格")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("td",{attrs:{colspan:"4"}},[e("div",{staticClass:"input-group"},[e("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"輸入優惠代碼","aria-label":"輸入優惠代碼","aria-describedby":"basic-addon2"}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"}},[t._v("Button")])])])])])}],i=(e("99af"),e("d58b")),o=e("0418"),l=e("fd2d"),c={name:"checkuot",data:function(){return{carts:[],isLoading:!1,totalPrice:0,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{Circle4:i["a"],Header:o["a"],Footer:l["a"]},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("iian0910","/cart");t.isLoading=!0,t.$http.get(a).then((function(a){t.isLoading=!1,console.log(a.data.data.carts),t.carts=a.data.data.carts,t.addPrice()}))},addPrice:function(){for(var t=this,a=t.carts.length,e=0;e<a;e++)t.totalPrice+=Math.floor(t.carts[e].product.price)},createOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("iian0910","/order"),e=t.form;t.isLoading=!0,t.$validator.validate().then((function(s){s?t.$http.post(a,{data:e}).then((function(a){console.log("訂單已建立",a),a.data.success&&t.$router.push("/checkout/".concat(a.data.orderId)),t.isLoading=!1})):console.log("欄位不完整")}))}},created:function(){this.getCart()}},n=c,d=(e("652d"),e("2877")),m=Object(d["a"])(n,s,r,!1,null,"0f2e2052",null);a["default"]=m.exports}}]);
//# sourceMappingURL=chunk-7578a430.10d42309.js.map